{
    "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {
        "vulnerabilityAssessments_Default_storageContainerPath": {
            "type": "SecureString"
        },
        "servers_webshop_sql_pl_name": {
            "defaultValue": "webshop-sql-pl",
            "type": "String"
        },
        "Redis_webshop_redis_pl_name": {
            "defaultValue": "webshop-redis-pl",
            "type": "String"
        },
        "vaults_webshop_kv_pl_name": {
            "defaultValue": "webshop-kv-pl",
            "type": "String"
        },
        "storageAccounts_webshopstpl_name": {
            "defaultValue": "webshopstpl",
            "type": "String"
        },
        "namespaces_webshop_sbns_pl_name": {
            "defaultValue": "webshop-sbns-pl",
            "type": "String"
        },
        "registries_webshopcrpl_name": {
            "defaultValue": "webshopcrpl",
            "type": "String"
        },
        "databaseAccounts_webshop_cosno_pl_name": {
            "defaultValue": "webshop-cosno-pl",
            "type": "String"
        },
        "managedClusters_webshop_aks_pl_name": {
            "defaultValue": "webshop-aks-pl",
            "type": "String"
        },
        "configurationStores_webshop_appcs_pl_name": {
            "defaultValue": "webshop-appcs-pl",
            "type": "String"
        },
        "publicIPAddresses_c66406ad_27a2_4891_9525_c2dc8d40902d_externalid": {
            "defaultValue": "/subscriptions/056d0dbb-f356-40f5-baec-ff763758325a/resourceGroups/MC_webshop-rg-pl_webshop-aks-pl_polandcentral/providers/Microsoft.Network/publicIPAddresses/c66406ad-27a2-4891-9525-c2dc8d40902d",
            "type": "String"
        },
        "userAssignedIdentities_webshop_aks_pl_agentpool_externalid": {
            "defaultValue": "/subscriptions/056d0dbb-f356-40f5-baec-ff763758325a/resourceGroups/MC_webshop-rg-pl_webshop-aks-pl_polandcentral/providers/Microsoft.ManagedIdentity/userAssignedIdentities/webshop-aks-pl-agentpool",
            "type": "String"
        }
    },
    "variables": {},
    "resources": [
        {
            "type": "Microsoft.AppConfiguration/configurationStores",
            "apiVersion": "2023-08-01-preview",
            "name": "[parameters('configurationStores_webshop_appcs_pl_name')]",
            "location": "polandcentral",
            "sku": {
                "name": "standard"
            },
            "properties": {
                "encryption": {},
                "disableLocalAuth": false,
                "softDeleteRetentionInDays": 7,
                "enablePurgeProtection": false,
                "dataPlaneProxy": {
                    "authenticationMode": "Local",
                    "privateLinkDelegation": "Disabled"
                }
            }
        },
        {
            "type": "Microsoft.Cache/Redis",
            "apiVersion": "2023-08-01",
            "name": "[parameters('Redis_webshop_redis_pl_name')]",
            "location": "Poland Central",
            "properties": {
                "redisVersion": "6.0",
                "sku": {
                    "name": "Basic",
                    "family": "C",
                    "capacity": 0
                },
                "enableNonSslPort": false,
                "publicNetworkAccess": "Enabled",
                "redisConfiguration": {
                    "maxmemory-reserved": "30",
                    "maxfragmentationmemory-reserved": "30",
                    "maxmemory-delta": "30"
                },
                "updateChannel": "Stable"
            }
        },
        {
            "type": "Microsoft.ContainerRegistry/registries",
            "apiVersion": "2023-11-01-preview",
            "name": "[parameters('registries_webshopcrpl_name')]",
            "location": "polandcentral",
            "sku": {
                "name": "Basic",
                "tier": "Basic"
            },
            "properties": {
                "adminUserEnabled": false,
                "policies": {
                    "quarantinePolicy": {
                        "status": "disabled"
                    },
                    "trustPolicy": {
                        "type": "Notary",
                        "status": "disabled"
                    },
                    "retentionPolicy": {
                        "days": 7,
                        "status": "disabled"
                    },
                    "exportPolicy": {
                        "status": "enabled"
                    },
                    "azureADAuthenticationAsArmPolicy": {
                        "status": "enabled"
                    },
                    "softDeletePolicy": {
                        "retentionDays": 7,
                        "status": "disabled"
                    }
                },
                "encryption": {
                    "status": "disabled"
                },
                "dataEndpointEnabled": false,
                "publicNetworkAccess": "Enabled",
                "networkRuleBypassOptions": "AzureServices",
                "zoneRedundancy": "Disabled",
                "anonymousPullEnabled": false,
                "metadataSearch": "Disabled"
            }
        },
        {
            "type": "Microsoft.ContainerService/managedClusters",
            "apiVersion": "2023-11-02-preview",
            "name": "[parameters('managedClusters_webshop_aks_pl_name')]",
            "location": "polandcentral",
            "sku": {
                "name": "Base",
                "tier": "Free"
            },
            "identity": {
                "type": "SystemAssigned"
            },
            "properties": {
                "kubernetesVersion": "1.27.9",
                "dnsPrefix": "[concat(parameters('managedClusters_webshop_aks_pl_name'), '-dns')]",
                "agentPoolProfiles": [
                    {
                        "name": "agentpool",
                        "count": 2,
                        "vmSize": "Standard_DS2_v2",
                        "osDiskSizeGB": 128,
                        "osDiskType": "Managed",
                        "kubeletDiskType": "OS",
                        "maxPods": 110,
                        "type": "VirtualMachineScaleSets",
                        "maxCount": 5,
                        "minCount": 2,
                        "enableAutoScaling": true,
                        "powerState": {
                            "code": "Running"
                        },
                        "orchestratorVersion": "1.27.9",
                        "enableNodePublicIP": false,
                        "mode": "System",
                        "osType": "Linux",
                        "osSKU": "Ubuntu",
                        "enableFIPS": false,
                        "securityProfile": {
                            "sshAccess": "LocalUser"
                        }
                    }
                ],
                "servicePrincipalProfile": {
                    "clientId": "msi"
                },
                "addonProfiles": {
                    "azureKeyvaultSecretsProvider": {
                        "enabled": false
                    },
                    "azurepolicy": {
                        "enabled": false
                    }
                },
                "nodeResourceGroup": "[concat('MC_webshop-rg-pl_', parameters('managedClusters_webshop_aks_pl_name'), '_polandcentral')]",
                "enableRBAC": true,
                "supportPlan": "KubernetesOfficial",
                "networkProfile": {
                    "networkPlugin": "kubenet",
                    "networkPolicy": "calico",
                    "loadBalancerSku": "Standard",
                    "loadBalancerProfile": {
                        "managedOutboundIPs": {
                            "count": 1
                        },
                        "effectiveOutboundIPs": [
                            {
                                "id": "[parameters('publicIPAddresses_c66406ad_27a2_4891_9525_c2dc8d40902d_externalid')]"
                            }
                        ],
                        "backendPoolType": "nodeIPConfiguration"
                    },
                    "podCidr": "10.244.0.0/16",
                    "serviceCidr": "10.0.0.0/16",
                    "dnsServiceIP": "10.0.0.10",
                    "outboundType": "loadBalancer",
                    "podCidrs": [
                        "10.244.0.0/16"
                    ],
                    "serviceCidrs": [
                        "10.0.0.0/16"
                    ],
                    "ipFamilies": [
                        "IPv4"
                    ]
                },
                "identityProfile": {
                    "kubeletidentity": {
                        "resourceId": "[parameters('userAssignedIdentities_webshop_aks_pl_agentpool_externalid')]",
                        "clientId": "4cf45ffe-385a-417c-8c16-412f0035d4a4",
                        "objectId": "594a3369-7247-4e4e-948f-6ef9058d2a40"
                    }
                },
                "autoScalerProfile": {
                    "balance-similar-node-groups": "false",
                    "daemonset-eviction-for-empty-nodes": false,
                    "daemonset-eviction-for-occupied-nodes": true,
                    "expander": "random",
                    "ignore-daemonsets-utilization": false,
                    "max-empty-bulk-delete": "10",
                    "max-graceful-termination-sec": "600",
                    "max-node-provision-time": "15m",
                    "max-total-unready-percentage": "45",
                    "new-pod-scale-up-delay": "0s",
                    "ok-total-unready-count": "3",
                    "scale-down-delay-after-add": "10m",
                    "scale-down-delay-after-delete": "10s",
                    "scale-down-delay-after-failure": "3m",
                    "scale-down-unneeded-time": "10m",
                    "scale-down-unready-time": "20m",
                    "scale-down-utilization-threshold": "0.5",
                    "scan-interval": "10s",
                    "skip-nodes-with-local-storage": "false",
                    "skip-nodes-with-system-pods": "true"
                },
                "autoUpgradeProfile": {
                    "upgradeChannel": "patch",
                    "nodeOSUpgradeChannel": "NodeImage"
                },
                "disableLocalAccounts": false,
                "securityProfile": {},
                "storageProfile": {
                    "diskCSIDriver": {
                        "enabled": true,
                        "version": "v1"
                    },
                    "fileCSIDriver": {
                        "enabled": true
                    },
                    "snapshotController": {
                        "enabled": true
                    }
                },
                "oidcIssuerProfile": {
                    "enabled": false
                },
                "workloadAutoScalerProfile": {},
                "metricsProfile": {
                    "costAnalysis": {
                        "enabled": false
                    }
                },
                "nodeProvisioningProfile": {
                    "mode": "Manual"
                }
            }
        },
        {
            "type": "Microsoft.DocumentDB/databaseAccounts",
            "apiVersion": "2023-11-15",
            "name": "[parameters('databaseAccounts_webshop_cosno_pl_name')]",
            "location": "Poland Central",
            "tags": {
                "defaultExperience": "Core (SQL)",
                "hidden-cosmos-mmspecial": ""
            },
            "kind": "GlobalDocumentDB",
            "identity": {
                "type": "None"
            },
            "properties": {
                "publicNetworkAccess": "Enabled",
                "enableAutomaticFailover": false,
                "enableMultipleWriteLocations": false,
                "isVirtualNetworkFilterEnabled": false,
                "virtualNetworkRules": [],
                "disableKeyBasedMetadataWriteAccess": false,
                "enableFreeTier": false,
                "enableAnalyticalStorage": false,
                "analyticalStorageConfiguration": {
                    "schemaType": "WellDefined"
                },
                "databaseAccountOfferType": "Standard",
                "defaultIdentity": "FirstPartyIdentity",
                "networkAclBypass": "None",
                "disableLocalAuth": false,
                "enablePartitionMerge": false,
                "enableBurstCapacity": false,
                "minimalTlsVersion": "Tls12",
                "consistencyPolicy": {
                    "defaultConsistencyLevel": "Session",
                    "maxIntervalInSeconds": 5,
                    "maxStalenessPrefix": 100
                },
                "locations": [
                    {
                        "locationName": "Poland Central",
                        "provisioningState": "Succeeded",
                        "failoverPriority": 0,
                        "isZoneRedundant": false
                    }
                ],
                "cors": [],
                "capabilities": [],
                "ipRules": [],
                "backupPolicy": {
                    "type": "Periodic",
                    "periodicModeProperties": {
                        "backupIntervalInMinutes": 240,
                        "backupRetentionIntervalInHours": 8,
                        "backupStorageRedundancy": "Local"
                    }
                },
                "networkAclBypassResourceIds": [],
                "capacity": {
                    "totalThroughputLimit": 1000
                },
                "keysMetadata": {}
            }
        },
        {
            "type": "Microsoft.KeyVault/vaults",
            "apiVersion": "2023-07-01",
            "name": "[parameters('vaults_webshop_kv_pl_name')]",
            "location": "polandcentral",
            "properties": {
                "sku": {
                    "family": "A",
                    "name": "Standard"
                },
                "tenantId": "a7c8e153-70e0-4320-bfc4-2411190dd69e",
                "networkAcls": {
                    "bypass": "AzureServices",
                    "defaultAction": "Deny",
                    "ipRules": [],
                    "virtualNetworkRules": []
                },
                "accessPolicies": [],
                "enabledForDeployment": false,
                "enabledForDiskEncryption": false,
                "enabledForTemplateDeployment": false,
                "enableSoftDelete": true,
                "softDeleteRetentionInDays": 90,
                "enableRbacAuthorization": true,
                "vaultUri": "[concat('https://', parameters('vaults_webshop_kv_pl_name'), '.vault.azure.net/')]",
                "provisioningState": "Succeeded",
                "publicNetworkAccess": "Disabled"
            }
        },
        {
            "type": "Microsoft.ServiceBus/namespaces",
            "apiVersion": "2022-10-01-preview",
            "name": "[parameters('namespaces_webshop_sbns_pl_name')]",
            "location": "polandcentral",
            "sku": {
                "name": "Basic",
                "tier": "Basic"
            },
            "properties": {
                "premiumMessagingPartitions": 0,
                "minimumTlsVersion": "1.2",
                "publicNetworkAccess": "Enabled",
                "disableLocalAuth": false,
                "privateEndpointConnections": [],
                "zoneRedundant": true
            }
        },
        {
            "type": "Microsoft.Sql/servers",
            "apiVersion": "2023-05-01-preview",
            "name": "[parameters('servers_webshop_sql_pl_name')]",
            "location": "polandcentral",
            "kind": "v12.0",
            "properties": {
                "administratorLogin": "vcxz23",
                "version": "12.0",
                "minimalTlsVersion": "1.2",
                "publicNetworkAccess": "Disabled",
                "restrictOutboundNetworkAccess": "Disabled"
            }
        },
        {
            "type": "Microsoft.Storage/storageAccounts",
            "apiVersion": "2023-01-01",
            "name": "[parameters('storageAccounts_webshopstpl_name')]",
            "location": "polandcentral",
            "sku": {
                "name": "Standard_LRS",
                "tier": "Standard"
            },
            "kind": "StorageV2",
            "properties": {
                "dnsEndpointType": "Standard",
                "defaultToOAuthAuthentication": false,
                "publicNetworkAccess": "Enabled",
                "allowCrossTenantReplication": false,
                "minimumTlsVersion": "TLS1_2",
                "allowBlobPublicAccess": false,
                "allowSharedKeyAccess": true,
                "networkAcls": {
                    "bypass": "AzureServices",
                    "virtualNetworkRules": [],
                    "ipRules": [],
                    "defaultAction": "Allow"
                },
                "supportsHttpsTrafficOnly": false,
                "encryption": {
                    "requireInfrastructureEncryption": false,
                    "services": {
                        "file": {
                            "keyType": "Account",
                            "enabled": true
                        },
                        "blob": {
                            "keyType": "Account",
                            "enabled": true
                        }
                    },
                    "keySource": "Microsoft.Storage"
                },
                "accessTier": "Hot"
            }
        },
        {
            "type": "Microsoft.Cache/Redis/accessPolicies",
            "apiVersion": "2023-08-01",
            "name": "[concat(parameters('Redis_webshop_redis_pl_name'), '/Data Contributor')]",
            "dependsOn": [
                "[resourceId('Microsoft.Cache/Redis', parameters('Redis_webshop_redis_pl_name'))]"
            ],
            "properties": {
                "permissions": "+@all -@dangerous +cluster|info +cluster|nodes +cluster|slots allkeys"
            }
        },
        {
            "type": "Microsoft.Cache/Redis/accessPolicies",
            "apiVersion": "2023-08-01",
            "name": "[concat(parameters('Redis_webshop_redis_pl_name'), '/Data Owner')]",
            "dependsOn": [
                "[resourceId('Microsoft.Cache/Redis', parameters('Redis_webshop_redis_pl_name'))]"
            ],
            "properties": {
                "permissions": "+@all allkeys"
            }
        },
        {
            "type": "Microsoft.Cache/Redis/accessPolicies",
            "apiVersion": "2023-08-01",
            "name": "[concat(parameters('Redis_webshop_redis_pl_name'), '/Data Reader')]",
            "dependsOn": [
                "[resourceId('Microsoft.Cache/Redis', parameters('Redis_webshop_redis_pl_name'))]"
            ],
            "properties": {
                "permissions": "+@read +@connection +cluster|info +cluster|nodes +cluster|slots allkeys"
            }
        },
        {
            "type": "Microsoft.ContainerRegistry/registries/scopeMaps",
            "apiVersion": "2023-11-01-preview",
            "name": "[concat(parameters('registries_webshopcrpl_name'), '/_repositories_admin')]",
            "dependsOn": [
                "[resourceId('Microsoft.ContainerRegistry/registries', parameters('registries_webshopcrpl_name'))]"
            ],
            "properties": {
                "description": "Can perform all read, write and delete operations on the registry",
                "actions": [
                    "repositories/*/metadata/read",
                    "repositories/*/metadata/write",
                    "repositories/*/content/read",
                    "repositories/*/content/write",
                    "repositories/*/content/delete"
                ]
            }
        },
        {
            "type": "Microsoft.ContainerRegistry/registries/scopeMaps",
            "apiVersion": "2023-11-01-preview",
            "name": "[concat(parameters('registries_webshopcrpl_name'), '/_repositories_pull')]",
            "dependsOn": [
                "[resourceId('Microsoft.ContainerRegistry/registries', parameters('registries_webshopcrpl_name'))]"
            ],
            "properties": {
                "description": "Can pull any repository of the registry",
                "actions": [
                    "repositories/*/content/read"
                ]
            }
        },
        {
            "type": "Microsoft.ContainerRegistry/registries/scopeMaps",
            "apiVersion": "2023-11-01-preview",
            "name": "[concat(parameters('registries_webshopcrpl_name'), '/_repositories_pull_metadata_read')]",
            "dependsOn": [
                "[resourceId('Microsoft.ContainerRegistry/registries', parameters('registries_webshopcrpl_name'))]"
            ],
            "properties": {
                "description": "Can perform all read operations on the registry",
                "actions": [
                    "repositories/*/content/read",
                    "repositories/*/metadata/read"
                ]
            }
        },
        {
            "type": "Microsoft.ContainerRegistry/registries/scopeMaps",
            "apiVersion": "2023-11-01-preview",
            "name": "[concat(parameters('registries_webshopcrpl_name'), '/_repositories_push')]",
            "dependsOn": [
                "[resourceId('Microsoft.ContainerRegistry/registries', parameters('registries_webshopcrpl_name'))]"
            ],
            "properties": {
                "description": "Can push to any repository of the registry",
                "actions": [
                    "repositories/*/content/read",
                    "repositories/*/content/write"
                ]
            }
        },
        {
            "type": "Microsoft.ContainerRegistry/registries/scopeMaps",
            "apiVersion": "2023-11-01-preview",
            "name": "[concat(parameters('registries_webshopcrpl_name'), '/_repositories_push_metadata_write')]",
            "dependsOn": [
                "[resourceId('Microsoft.ContainerRegistry/registries', parameters('registries_webshopcrpl_name'))]"
            ],
            "properties": {
                "description": "Can perform all read and write operations on the registry",
                "actions": [
                    "repositories/*/metadata/read",
                    "repositories/*/metadata/write",
                    "repositories/*/content/read",
                    "repositories/*/content/write"
                ]
            }
        },
        {
            "type": "Microsoft.ContainerService/managedClusters/agentPools",
            "apiVersion": "2023-11-02-preview",
            "name": "[concat(parameters('managedClusters_webshop_aks_pl_name'), '/agentpool')]",
            "dependsOn": [
                "[resourceId('Microsoft.ContainerService/managedClusters', parameters('managedClusters_webshop_aks_pl_name'))]"
            ],
            "properties": {
                "count": 2,
                "vmSize": "Standard_DS2_v2",
                "osDiskSizeGB": 128,
                "osDiskType": "Managed",
                "kubeletDiskType": "OS",
                "maxPods": 110,
                "type": "VirtualMachineScaleSets",
                "maxCount": 5,
                "minCount": 2,
                "enableAutoScaling": true,
                "powerState": {
                    "code": "Running"
                },
                "orchestratorVersion": "1.27.9",
                "enableNodePublicIP": false,
                "mode": "System",
                "osType": "Linux",
                "osSKU": "Ubuntu",
                "enableFIPS": false,
                "securityProfile": {
                    "sshAccess": "LocalUser"
                }
            }
        },
        {
            "type": "Microsoft.ContainerService/managedClusters/maintenanceConfigurations",
            "apiVersion": "2023-11-02-preview",
            "name": "[concat(parameters('managedClusters_webshop_aks_pl_name'), '/aksManagedAutoUpgradeSchedule')]",
            "dependsOn": [
                "[resourceId('Microsoft.ContainerService/managedClusters', parameters('managedClusters_webshop_aks_pl_name'))]"
            ],
            "properties": {
                "maintenanceWindow": {
                    "schedule": {
                        "weekly": {
                            "intervalWeeks": 1,
                            "dayOfWeek": "Sunday"
                        }
                    },
                    "durationHours": 4,
                    "utcOffset": "+00:00",
                    "startDate": "2024-03-24",
                    "startTime": "00:00"
                }
            }
        },
        {
            "type": "Microsoft.ContainerService/managedClusters/maintenanceConfigurations",
            "apiVersion": "2023-11-02-preview",
            "name": "[concat(parameters('managedClusters_webshop_aks_pl_name'), '/aksManagedNodeOSUpgradeSchedule')]",
            "dependsOn": [
                "[resourceId('Microsoft.ContainerService/managedClusters', parameters('managedClusters_webshop_aks_pl_name'))]"
            ],
            "properties": {
                "maintenanceWindow": {
                    "schedule": {
                        "weekly": {
                            "intervalWeeks": 1,
                            "dayOfWeek": "Sunday"
                        }
                    },
                    "durationHours": 4,
                    "utcOffset": "+00:00",
                    "startDate": "2024-03-24",
                    "startTime": "00:00"
                }
            }
        },
        {
            "type": "Microsoft.DocumentDB/databaseAccounts/sqlRoleDefinitions",
            "apiVersion": "2023-11-15",
            "name": "[concat(parameters('databaseAccounts_webshop_cosno_pl_name'), '/00000000-0000-0000-0000-000000000001')]",
            "dependsOn": [
                "[resourceId('Microsoft.DocumentDB/databaseAccounts', parameters('databaseAccounts_webshop_cosno_pl_name'))]"
            ],
            "properties": {
                "roleName": "Cosmos DB Built-in Data Reader",
                "type": "BuiltInRole",
                "assignableScopes": [
                    "[resourceId('Microsoft.DocumentDB/databaseAccounts', parameters('databaseAccounts_webshop_cosno_pl_name'))]"
                ],
                "permissions": [
                    {
                        "dataActions": [
                            "Microsoft.DocumentDB/databaseAccounts/readMetadata",
                            "Microsoft.DocumentDB/databaseAccounts/sqlDatabases/containers/executeQuery",
                            "Microsoft.DocumentDB/databaseAccounts/sqlDatabases/containers/readChangeFeed",
                            "Microsoft.DocumentDB/databaseAccounts/sqlDatabases/containers/items/read"
                        ],
                        "notDataActions": []
                    }
                ]
            }
        },
        {
            "type": "Microsoft.DocumentDB/databaseAccounts/sqlRoleDefinitions",
            "apiVersion": "2023-11-15",
            "name": "[concat(parameters('databaseAccounts_webshop_cosno_pl_name'), '/00000000-0000-0000-0000-000000000002')]",
            "dependsOn": [
                "[resourceId('Microsoft.DocumentDB/databaseAccounts', parameters('databaseAccounts_webshop_cosno_pl_name'))]"
            ],
            "properties": {
                "roleName": "Cosmos DB Built-in Data Contributor",
                "type": "BuiltInRole",
                "assignableScopes": [
                    "[resourceId('Microsoft.DocumentDB/databaseAccounts', parameters('databaseAccounts_webshop_cosno_pl_name'))]"
                ],
                "permissions": [
                    {
                        "dataActions": [
                            "Microsoft.DocumentDB/databaseAccounts/readMetadata",
                            "Microsoft.DocumentDB/databaseAccounts/sqlDatabases/containers/*",
                            "Microsoft.DocumentDB/databaseAccounts/sqlDatabases/containers/items/*"
                        ],
                        "notDataActions": []
                    }
                ]
            }
        },
        {
            "type": "Microsoft.ServiceBus/namespaces/authorizationrules",
            "apiVersion": "2022-10-01-preview",
            "name": "[concat(parameters('namespaces_webshop_sbns_pl_name'), '/RootManageSharedAccessKey')]",
            "location": "polandcentral",
            "dependsOn": [
                "[resourceId('Microsoft.ServiceBus/namespaces', parameters('namespaces_webshop_sbns_pl_name'))]"
            ],
            "properties": {
                "rights": [
                    "Listen",
                    "Manage",
                    "Send"
                ]
            }
        },
        {
            "type": "Microsoft.ServiceBus/namespaces/networkrulesets",
            "apiVersion": "2022-10-01-preview",
            "name": "[concat(parameters('namespaces_webshop_sbns_pl_name'), '/default')]",
            "location": "polandcentral",
            "dependsOn": [
                "[resourceId('Microsoft.ServiceBus/namespaces', parameters('namespaces_webshop_sbns_pl_name'))]"
            ],
            "properties": {
                "publicNetworkAccess": "Enabled",
                "defaultAction": "Allow",
                "virtualNetworkRules": [],
                "ipRules": [],
                "trustedServiceAccessEnabled": false
            }
        },
        {
            "type": "Microsoft.Sql/servers/advancedThreatProtectionSettings",
            "apiVersion": "2023-05-01-preview",
            "name": "[concat(parameters('servers_webshop_sql_pl_name'), '/Default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_webshop_sql_pl_name'))]"
            ],
            "properties": {
                "state": "Disabled"
            }
        },
        {
            "type": "Microsoft.Sql/servers/advisors",
            "apiVersion": "2014-04-01",
            "name": "[concat(parameters('servers_webshop_sql_pl_name'), '/CreateIndex')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_webshop_sql_pl_name'))]"
            ],
            "properties": {
                "autoExecuteValue": "Disabled"
            }
        },
        {
            "type": "Microsoft.Sql/servers/advisors",
            "apiVersion": "2014-04-01",
            "name": "[concat(parameters('servers_webshop_sql_pl_name'), '/DbParameterization')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_webshop_sql_pl_name'))]"
            ],
            "properties": {
                "autoExecuteValue": "Disabled"
            }
        },
        {
            "type": "Microsoft.Sql/servers/advisors",
            "apiVersion": "2014-04-01",
            "name": "[concat(parameters('servers_webshop_sql_pl_name'), '/DefragmentIndex')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_webshop_sql_pl_name'))]"
            ],
            "properties": {
                "autoExecuteValue": "Disabled"
            }
        },
        {
            "type": "Microsoft.Sql/servers/advisors",
            "apiVersion": "2014-04-01",
            "name": "[concat(parameters('servers_webshop_sql_pl_name'), '/DropIndex')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_webshop_sql_pl_name'))]"
            ],
            "properties": {
                "autoExecuteValue": "Disabled"
            }
        },
        {
            "type": "Microsoft.Sql/servers/advisors",
            "apiVersion": "2014-04-01",
            "name": "[concat(parameters('servers_webshop_sql_pl_name'), '/ForceLastGoodPlan')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_webshop_sql_pl_name'))]"
            ],
            "properties": {
                "autoExecuteValue": "Enabled"
            }
        },
        {
            "type": "Microsoft.Sql/servers/auditingPolicies",
            "apiVersion": "2014-04-01",
            "name": "[concat(parameters('servers_webshop_sql_pl_name'), '/Default')]",
            "location": "Poland Central",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_webshop_sql_pl_name'))]"
            ],
            "properties": {
                "auditingState": "Disabled"
            }
        },
        {
            "type": "Microsoft.Sql/servers/auditingSettings",
            "apiVersion": "2023-05-01-preview",
            "name": "[concat(parameters('servers_webshop_sql_pl_name'), '/Default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_webshop_sql_pl_name'))]"
            ],
            "properties": {
                "retentionDays": 0,
                "auditActionsAndGroups": [],
                "isStorageSecondaryKeyInUse": false,
                "isAzureMonitorTargetEnabled": false,
                "isManagedIdentityInUse": false,
                "state": "Disabled",
                "storageAccountSubscriptionId": "00000000-0000-0000-0000-000000000000"
            }
        },
        {
            "type": "Microsoft.Sql/servers/connectionPolicies",
            "apiVersion": "2023-05-01-preview",
            "name": "[concat(parameters('servers_webshop_sql_pl_name'), '/default')]",
            "location": "polandcentral",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_webshop_sql_pl_name'))]"
            ],
            "properties": {
                "connectionType": "Default"
            }
        },
        {
            "type": "Microsoft.Sql/servers/databases",
            "apiVersion": "2023-05-01-preview",
            "name": "[concat(parameters('servers_webshop_sql_pl_name'), '/webshop-sqldb-pl')]",
            "location": "polandcentral",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_webshop_sql_pl_name'))]"
            ],
            "sku": {
                "name": "GP_S_Gen5",
                "tier": "GeneralPurpose",
                "family": "Gen5",
                "capacity": 4
            },
            "kind": "v12.0,user,vcore,serverless",
            "properties": {
                "collation": "SQL_Latin1_General_CP1_CI_AS",
                "maxSizeBytes": 34359738368,
                "catalogCollation": "SQL_Latin1_General_CP1_CI_AS",
                "zoneRedundant": false,
                "readScale": "Disabled",
                "autoPauseDelay": 60,
                "requestedBackupStorageRedundancy": "Local",
                "minCapacity": 1,
                "maintenanceConfigurationId": "/subscriptions/056d0dbb-f356-40f5-baec-ff763758325a/providers/Microsoft.Maintenance/publicMaintenanceConfigurations/SQL_Default",
                "isLedgerOn": false,
                "availabilityZone": "NoPreference"
            }
        },
        {
            "type": "Microsoft.Sql/servers/databases/advancedThreatProtectionSettings",
            "apiVersion": "2023-05-01-preview",
            "name": "[concat(parameters('servers_webshop_sql_pl_name'), '/master/Default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_webshop_sql_pl_name'))]"
            ],
            "properties": {
                "state": "Disabled"
            }
        },
        {
            "type": "Microsoft.Sql/servers/databases/auditingPolicies",
            "apiVersion": "2014-04-01",
            "name": "[concat(parameters('servers_webshop_sql_pl_name'), '/master/Default')]",
            "location": "Poland Central",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_webshop_sql_pl_name'))]"
            ],
            "properties": {
                "auditingState": "Disabled"
            }
        },
        {
            "type": "Microsoft.Sql/servers/databases/auditingSettings",
            "apiVersion": "2023-05-01-preview",
            "name": "[concat(parameters('servers_webshop_sql_pl_name'), '/master/Default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_webshop_sql_pl_name'))]"
            ],
            "properties": {
                "retentionDays": 0,
                "isAzureMonitorTargetEnabled": false,
                "state": "Disabled",
                "storageAccountSubscriptionId": "00000000-0000-0000-0000-000000000000"
            }
        },
        {
            "type": "Microsoft.Sql/servers/databases/extendedAuditingSettings",
            "apiVersion": "2023-05-01-preview",
            "name": "[concat(parameters('servers_webshop_sql_pl_name'), '/master/Default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_webshop_sql_pl_name'))]"
            ],
            "properties": {
                "retentionDays": 0,
                "isAzureMonitorTargetEnabled": false,
                "state": "Disabled",
                "storageAccountSubscriptionId": "00000000-0000-0000-0000-000000000000"
            }
        },
        {
            "type": "Microsoft.Sql/servers/databases/geoBackupPolicies",
            "apiVersion": "2023-05-01-preview",
            "name": "[concat(parameters('servers_webshop_sql_pl_name'), '/master/Default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_webshop_sql_pl_name'))]"
            ],
            "properties": {
                "state": "Disabled"
            }
        },
        {
            "type": "Microsoft.Sql/servers/databases/ledgerDigestUploads",
            "apiVersion": "2023-05-01-preview",
            "name": "[concat(parameters('servers_webshop_sql_pl_name'), '/master/Current')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_webshop_sql_pl_name'))]"
            ],
            "properties": {}
        },
        {
            "type": "Microsoft.Sql/servers/databases/securityAlertPolicies",
            "apiVersion": "2023-05-01-preview",
            "name": "[concat(parameters('servers_webshop_sql_pl_name'), '/master/Default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_webshop_sql_pl_name'))]"
            ],
            "properties": {
                "state": "Disabled",
                "disabledAlerts": [
                    ""
                ],
                "emailAddresses": [
                    ""
                ],
                "emailAccountAdmins": false,
                "retentionDays": 0
            }
        },
        {
            "type": "Microsoft.Sql/servers/databases/transparentDataEncryption",
            "apiVersion": "2023-05-01-preview",
            "name": "[concat(parameters('servers_webshop_sql_pl_name'), '/master/Current')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_webshop_sql_pl_name'))]"
            ],
            "properties": {
                "state": "Disabled"
            }
        },
        {
            "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments",
            "apiVersion": "2023-05-01-preview",
            "name": "[concat(parameters('servers_webshop_sql_pl_name'), '/master/Default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_webshop_sql_pl_name'))]"
            ],
            "properties": {
                "recurringScans": {
                    "isEnabled": false,
                    "emailSubscriptionAdmins": true
                }
            }
        },
        {
            "type": "Microsoft.Sql/servers/devOpsAuditingSettings",
            "apiVersion": "2023-05-01-preview",
            "name": "[concat(parameters('servers_webshop_sql_pl_name'), '/Default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_webshop_sql_pl_name'))]"
            ],
            "properties": {
                "isAzureMonitorTargetEnabled": false,
                "isManagedIdentityInUse": false,
                "state": "Disabled",
                "storageAccountSubscriptionId": "00000000-0000-0000-0000-000000000000"
            }
        },
        {
            "type": "Microsoft.Sql/servers/encryptionProtector",
            "apiVersion": "2023-05-01-preview",
            "name": "[concat(parameters('servers_webshop_sql_pl_name'), '/current')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_webshop_sql_pl_name'))]"
            ],
            "kind": "servicemanaged",
            "properties": {
                "serverKeyName": "ServiceManaged",
                "serverKeyType": "ServiceManaged",
                "autoRotationEnabled": false
            }
        },
        {
            "type": "Microsoft.Sql/servers/extendedAuditingSettings",
            "apiVersion": "2023-05-01-preview",
            "name": "[concat(parameters('servers_webshop_sql_pl_name'), '/Default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_webshop_sql_pl_name'))]"
            ],
            "properties": {
                "retentionDays": 0,
                "auditActionsAndGroups": [],
                "isStorageSecondaryKeyInUse": false,
                "isAzureMonitorTargetEnabled": false,
                "isManagedIdentityInUse": false,
                "state": "Disabled",
                "storageAccountSubscriptionId": "00000000-0000-0000-0000-000000000000"
            }
        },
        {
            "type": "Microsoft.Sql/servers/keys",
            "apiVersion": "2023-05-01-preview",
            "name": "[concat(parameters('servers_webshop_sql_pl_name'), '/ServiceManaged')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_webshop_sql_pl_name'))]"
            ],
            "kind": "servicemanaged",
            "properties": {
                "serverKeyType": "ServiceManaged"
            }
        },
        {
            "type": "Microsoft.Sql/servers/securityAlertPolicies",
            "apiVersion": "2023-05-01-preview",
            "name": "[concat(parameters('servers_webshop_sql_pl_name'), '/Default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_webshop_sql_pl_name'))]"
            ],
            "properties": {
                "state": "Disabled",
                "disabledAlerts": [
                    ""
                ],
                "emailAddresses": [
                    ""
                ],
                "emailAccountAdmins": false,
                "retentionDays": 0
            }
        },
        {
            "type": "Microsoft.Sql/servers/sqlVulnerabilityAssessments",
            "apiVersion": "2023-05-01-preview",
            "name": "[concat(parameters('servers_webshop_sql_pl_name'), '/Default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_webshop_sql_pl_name'))]"
            ],
            "properties": {
                "state": "Disabled"
            }
        },
        {
            "type": "Microsoft.Sql/servers/vulnerabilityAssessments",
            "apiVersion": "2023-05-01-preview",
            "name": "[concat(parameters('servers_webshop_sql_pl_name'), '/Default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_webshop_sql_pl_name'))]"
            ],
            "properties": {
                "recurringScans": {
                    "isEnabled": false,
                    "emailSubscriptionAdmins": true
                },
                "storageContainerPath": "[parameters('vulnerabilityAssessments_Default_storageContainerPath')]"
            }
        },
        {
            "type": "Microsoft.Storage/storageAccounts/blobServices",
            "apiVersion": "2023-01-01",
            "name": "[concat(parameters('storageAccounts_webshopstpl_name'), '/default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_webshopstpl_name'))]"
            ],
            "sku": {
                "name": "Standard_LRS",
                "tier": "Standard"
            },
            "properties": {
                "cors": {
                    "corsRules": []
                },
                "deleteRetentionPolicy": {
                    "allowPermanentDelete": false,
                    "enabled": false
                }
            }
        },
        {
            "type": "Microsoft.Storage/storageAccounts/fileServices",
            "apiVersion": "2023-01-01",
            "name": "[concat(parameters('storageAccounts_webshopstpl_name'), '/default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_webshopstpl_name'))]"
            ],
            "sku": {
                "name": "Standard_LRS",
                "tier": "Standard"
            },
            "properties": {
                "protocolSettings": {
                    "smb": {}
                },
                "cors": {
                    "corsRules": []
                },
                "shareDeleteRetentionPolicy": {
                    "enabled": true,
                    "days": 7
                }
            }
        },
        {
            "type": "Microsoft.Storage/storageAccounts/queueServices",
            "apiVersion": "2023-01-01",
            "name": "[concat(parameters('storageAccounts_webshopstpl_name'), '/default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_webshopstpl_name'))]"
            ],
            "properties": {
                "cors": {
                    "corsRules": []
                }
            }
        },
        {
            "type": "Microsoft.Storage/storageAccounts/tableServices",
            "apiVersion": "2023-01-01",
            "name": "[concat(parameters('storageAccounts_webshopstpl_name'), '/default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_webshopstpl_name'))]"
            ],
            "properties": {
                "cors": {
                    "corsRules": []
                }
            }
        },
        {
            "type": "Microsoft.Sql/servers/databases/advancedThreatProtectionSettings",
            "apiVersion": "2023-05-01-preview",
            "name": "[concat(parameters('servers_webshop_sql_pl_name'), '/webshop-sqldb-pl/Default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers/databases', parameters('servers_webshop_sql_pl_name'), 'webshop-sqldb-pl')]",
                "[resourceId('Microsoft.Sql/servers', parameters('servers_webshop_sql_pl_name'))]"
            ],
            "properties": {
                "state": "Disabled"
            }
        },
        {
            "type": "Microsoft.Sql/servers/databases/advisors",
            "apiVersion": "2014-04-01",
            "name": "[concat(parameters('servers_webshop_sql_pl_name'), '/webshop-sqldb-pl/CreateIndex')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers/databases', parameters('servers_webshop_sql_pl_name'), 'webshop-sqldb-pl')]",
                "[resourceId('Microsoft.Sql/servers', parameters('servers_webshop_sql_pl_name'))]"
            ],
            "properties": {
                "autoExecuteValue": "Disabled"
            }
        },
        {
            "type": "Microsoft.Sql/servers/databases/advisors",
            "apiVersion": "2014-04-01",
            "name": "[concat(parameters('servers_webshop_sql_pl_name'), '/webshop-sqldb-pl/DbParameterization')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers/databases', parameters('servers_webshop_sql_pl_name'), 'webshop-sqldb-pl')]",
                "[resourceId('Microsoft.Sql/servers', parameters('servers_webshop_sql_pl_name'))]"
            ],
            "properties": {
                "autoExecuteValue": "Disabled"
            }
        },
        {
            "type": "Microsoft.Sql/servers/databases/advisors",
            "apiVersion": "2014-04-01",
            "name": "[concat(parameters('servers_webshop_sql_pl_name'), '/webshop-sqldb-pl/DefragmentIndex')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers/databases', parameters('servers_webshop_sql_pl_name'), 'webshop-sqldb-pl')]",
                "[resourceId('Microsoft.Sql/servers', parameters('servers_webshop_sql_pl_name'))]"
            ],
            "properties": {
                "autoExecuteValue": "Disabled"
            }
        },
        {
            "type": "Microsoft.Sql/servers/databases/advisors",
            "apiVersion": "2014-04-01",
            "name": "[concat(parameters('servers_webshop_sql_pl_name'), '/webshop-sqldb-pl/DropIndex')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers/databases', parameters('servers_webshop_sql_pl_name'), 'webshop-sqldb-pl')]",
                "[resourceId('Microsoft.Sql/servers', parameters('servers_webshop_sql_pl_name'))]"
            ],
            "properties": {
                "autoExecuteValue": "Disabled"
            }
        },
        {
            "type": "Microsoft.Sql/servers/databases/advisors",
            "apiVersion": "2014-04-01",
            "name": "[concat(parameters('servers_webshop_sql_pl_name'), '/webshop-sqldb-pl/ForceLastGoodPlan')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers/databases', parameters('servers_webshop_sql_pl_name'), 'webshop-sqldb-pl')]",
                "[resourceId('Microsoft.Sql/servers', parameters('servers_webshop_sql_pl_name'))]"
            ],
            "properties": {
                "autoExecuteValue": "Enabled"
            }
        },
        {
            "type": "Microsoft.Sql/servers/databases/auditingPolicies",
            "apiVersion": "2014-04-01",
            "name": "[concat(parameters('servers_webshop_sql_pl_name'), '/webshop-sqldb-pl/Default')]",
            "location": "Poland Central",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers/databases', parameters('servers_webshop_sql_pl_name'), 'webshop-sqldb-pl')]",
                "[resourceId('Microsoft.Sql/servers', parameters('servers_webshop_sql_pl_name'))]"
            ],
            "properties": {
                "auditingState": "Disabled"
            }
        },
        {
            "type": "Microsoft.Sql/servers/databases/auditingSettings",
            "apiVersion": "2023-05-01-preview",
            "name": "[concat(parameters('servers_webshop_sql_pl_name'), '/webshop-sqldb-pl/Default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers/databases', parameters('servers_webshop_sql_pl_name'), 'webshop-sqldb-pl')]",
                "[resourceId('Microsoft.Sql/servers', parameters('servers_webshop_sql_pl_name'))]"
            ],
            "properties": {
                "retentionDays": 0,
                "isAzureMonitorTargetEnabled": false,
                "state": "Disabled",
                "storageAccountSubscriptionId": "00000000-0000-0000-0000-000000000000"
            }
        },
        {
            "type": "Microsoft.Sql/servers/databases/backupLongTermRetentionPolicies",
            "apiVersion": "2023-05-01-preview",
            "name": "[concat(parameters('servers_webshop_sql_pl_name'), '/webshop-sqldb-pl/default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers/databases', parameters('servers_webshop_sql_pl_name'), 'webshop-sqldb-pl')]",
                "[resourceId('Microsoft.Sql/servers', parameters('servers_webshop_sql_pl_name'))]"
            ],
            "properties": {
                "makeBackupsImmutable": false,
                "backupStorageAccessTier": "Hot",
                "weeklyRetention": "PT0S",
                "monthlyRetention": "PT0S",
                "yearlyRetention": "PT0S",
                "weekOfYear": 0
            }
        },
        {
            "type": "Microsoft.Sql/servers/databases/backupShortTermRetentionPolicies",
            "apiVersion": "2023-05-01-preview",
            "name": "[concat(parameters('servers_webshop_sql_pl_name'), '/webshop-sqldb-pl/default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers/databases', parameters('servers_webshop_sql_pl_name'), 'webshop-sqldb-pl')]",
                "[resourceId('Microsoft.Sql/servers', parameters('servers_webshop_sql_pl_name'))]"
            ],
            "properties": {
                "retentionDays": 7,
                "diffBackupIntervalInHours": 12
            }
        },
        {
            "type": "Microsoft.Sql/servers/databases/extendedAuditingSettings",
            "apiVersion": "2023-05-01-preview",
            "name": "[concat(parameters('servers_webshop_sql_pl_name'), '/webshop-sqldb-pl/Default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers/databases', parameters('servers_webshop_sql_pl_name'), 'webshop-sqldb-pl')]",
                "[resourceId('Microsoft.Sql/servers', parameters('servers_webshop_sql_pl_name'))]"
            ],
            "properties": {
                "retentionDays": 0,
                "isAzureMonitorTargetEnabled": false,
                "state": "Disabled",
                "storageAccountSubscriptionId": "00000000-0000-0000-0000-000000000000"
            }
        },
        {
            "type": "Microsoft.Sql/servers/databases/geoBackupPolicies",
            "apiVersion": "2023-05-01-preview",
            "name": "[concat(parameters('servers_webshop_sql_pl_name'), '/webshop-sqldb-pl/Default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers/databases', parameters('servers_webshop_sql_pl_name'), 'webshop-sqldb-pl')]",
                "[resourceId('Microsoft.Sql/servers', parameters('servers_webshop_sql_pl_name'))]"
            ],
            "properties": {
                "state": "Disabled"
            }
        },
        {
            "type": "Microsoft.Sql/servers/databases/ledgerDigestUploads",
            "apiVersion": "2023-05-01-preview",
            "name": "[concat(parameters('servers_webshop_sql_pl_name'), '/webshop-sqldb-pl/Current')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers/databases', parameters('servers_webshop_sql_pl_name'), 'webshop-sqldb-pl')]",
                "[resourceId('Microsoft.Sql/servers', parameters('servers_webshop_sql_pl_name'))]"
            ],
            "properties": {}
        },
        {
            "type": "Microsoft.Sql/servers/databases/securityAlertPolicies",
            "apiVersion": "2023-05-01-preview",
            "name": "[concat(parameters('servers_webshop_sql_pl_name'), '/webshop-sqldb-pl/Default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers/databases', parameters('servers_webshop_sql_pl_name'), 'webshop-sqldb-pl')]",
                "[resourceId('Microsoft.Sql/servers', parameters('servers_webshop_sql_pl_name'))]"
            ],
            "properties": {
                "state": "Disabled",
                "disabledAlerts": [
                    ""
                ],
                "emailAddresses": [
                    ""
                ],
                "emailAccountAdmins": false,
                "retentionDays": 0
            }
        },
        {
            "type": "Microsoft.Sql/servers/databases/transparentDataEncryption",
            "apiVersion": "2023-05-01-preview",
            "name": "[concat(parameters('servers_webshop_sql_pl_name'), '/webshop-sqldb-pl/Current')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers/databases', parameters('servers_webshop_sql_pl_name'), 'webshop-sqldb-pl')]",
                "[resourceId('Microsoft.Sql/servers', parameters('servers_webshop_sql_pl_name'))]"
            ],
            "properties": {
                "state": "Enabled"
            }
        },
        {
            "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments",
            "apiVersion": "2023-05-01-preview",
            "name": "[concat(parameters('servers_webshop_sql_pl_name'), '/webshop-sqldb-pl/Default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers/databases', parameters('servers_webshop_sql_pl_name'), 'webshop-sqldb-pl')]",
                "[resourceId('Microsoft.Sql/servers', parameters('servers_webshop_sql_pl_name'))]"
            ],
            "properties": {
                "recurringScans": {
                    "isEnabled": false,
                    "emailSubscriptionAdmins": true
                }
            }
        }
    ]
}